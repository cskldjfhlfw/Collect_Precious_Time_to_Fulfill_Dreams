# 科研管理系统 - 系统介绍

## 一、系统概述

科研管理系统是一个**现代化的科研成果管理平台**，帮助科研机构高效管理论文、项目、专利等科研成果。

### 核心价值

- 📊 **全面管理** - 9大科研成果类型的完整生命周期管理
- 🔍 **智能搜索** - MongoDB全文搜索 + AI智能分析
- 📝 **操作审计** - 所有操作自动记录，可追溯
- 🔒 **安全可靠** - 三级权限控制 + JWT认证
- 📈 **数据分析** - 多维度统计分析和可视化
- 🚀 **高效便捷** - 批量导入导出 + 现代化UI

---

## 二、功能模块

### 🎓 科研成果管理（9大模块）

#### 1. 论文管理
- 论文基本信息（标题、作者、期刊、年份）
- 论文全文存储和全文搜索（MongoDB）
- 作者信息管理（支持多作者）
- 引用统计和关键词标签
- PDF文件上传和管理

#### 2. 项目管理
- 项目立项、执行、结题全流程
- 预算管理和预算分解
- 项目里程碑追踪
- 团队成员管理
- 关联论文和专利
- 进度可视化

#### 3. 专利管理
- 专利申请和授权信息
- 发明人信息管理
- 专利状态追踪（申请中/已授权/已失效）
- 技术领域分类
- 年费管理

#### 4. 软著管理
- 软件著作权登记信息
- 版本管理
- 开发者信息
- 登记证书管理

#### 5. 会议管理
- 学术会议参与记录
- 论文投稿和接收
- 差旅预算管理
- 签证提醒

#### 6. 合作管理
- 科研合作伙伴信息
- 合作项目和资源共享
- 合作阶段管理
- 价值评估

#### 7. 竞赛管理
- 学科竞赛参与
- 团队成员管理
- 获奖记录
- 奖项追踪

#### 8. 资源管理
- 仪器设备信息
- 软件资源
- 使用记录
- 维护计划

#### 9. 用户管理（超级管理员专属）
- 用户账户管理
- 角色和权限分配
- 账户启用/禁用
- 密码重置

#### 10. 知识图谱 🌟
- **图谱可视化** - 2D/3D力导向图展示
- **多数据源支持**
  - PostgreSQL - 从现有数据生成图谱
  - Neo4j - 专业图数据库支持
- **智能关系分析**
  - 作者-论文关系
  - 项目-论文关系
  - 人员-领域关系
  - 核心研究者识别
- **交互式探索**
  - 节点筛选（论文/项目/专利/作者）
  - 关系强度可视化
  - 领域分析和统计
  - 动态创建实体节点
- **统计分析**
  - 节点数量统计
  - 关系类型分布
  - 领域增长趋势
  - 关键关系识别

---

### 🔐 认证和安全

#### 登录方式
1. **用户名/邮箱 + 密码登录**
2. **邮箱验证码登录**（无需记住密码）

#### 权限体系
```
超级管理员 (superadmin)
  └─ 所有权限
     ├─ 管理所有用户
     ├─ 查看操作日志
     ├─ 系统配置
     └─ 所有数据管理

管理员 (admin)
  └─ 数据管理权限
     ├─ 批量导入导出
     ├─ 创建/编辑/删除数据
     └─ 查看统计分析

普通用户 (user)
  └─ 基础权限
     ├─ 查看数据
     └─ 基本操作
```

#### 安全特性
- ✅ **JWT Token认证** - 30天有效期
- ✅ **密码加密** - Bcrypt不可逆加密
- ✅ **Token黑名单** - 登出后Token立即失效
- ✅ **IP追踪** - 记录所有登录IP
- ✅ **操作审计** - 所有操作自动记录

---

### 📝 操作审计系统

#### 记录内容
每个操作都会自动记录以下信息：

| 字段 | 说明 | 示例 |
|------|------|------|
| **操作者** | 用户ID | UUID |
| **操作类型** | create/update/delete/login/register | update |
| **资源类型** | paper/project/patent/user等 | paper |
| **资源ID** | 具体记录ID | UUID |
| **数据变更** | 修改前后对比 | status: draft → published |
| **IP地址** | 操作来源IP | 192.168.1.100 |
| **设备信息** | 浏览器和操作系统 | Chrome/Windows |
| **操作时间** | 时间戳 | 2024-11-16 10:00:00 |
| **操作结果** | 成功/失败 | success |

#### 可追溯的操作
- ✅ **登录注册** - 记录所有登录、注册操作
- ✅ **数据操作** - 创建、修改、删除（9个模块）
- ✅ **用户管理** - 角色变更、密码重置、账户禁用
- ✅ **批量导入** - 批量操作记录（即将添加）

#### 日志查询
- 按操作类型筛选
- 按资源类型筛选
- 按操作结果筛选（成功/失败）
- 关键词搜索
- 分页浏览（每页20条）

---

### 📊 数据分析

#### AI报表生成
- 基于AI的数据分析报表
- 可视化图表展示
- 趋势分析和预测
- 一键生成报表

#### 统计功能
- 各类成果数量统计
- 时间趋势分析
- 分类统计
- 状态分布

#### 全文搜索
- 论文全文搜索（MongoDB）
- 关键词高亮
- 相关度排序
- 快速检索

---

### 📤 批量操作

#### 批量导入
- **格式**: CSV文件（UTF-8编码）
- **流程**: 
  1. 下载CSV模板
  2. 填写数据
  3. 上传文件
  4. 自动导入
- **支持模块**: 全部9个模块
- **权限要求**: 管理员及以上

#### 数据导出
- **格式**: Excel文件
- **内容**: 可选择导出字段
- **权限要求**: 普通用户即可

---

## 三、技术架构

### 前端技术
- **框架**: Next.js 14 + React 18
- **语言**: TypeScript
- **样式**: Tailwind CSS
- **UI组件**: Shadcn/ui
- **图标**: Lucide Icons
- **图表**: Recharts

### 后端技术
- **框架**: FastAPI
- **语言**: Python 3.11+
- **数据库ORM**: SQLAlchemy 2.0
- **数据验证**: Pydantic 2.0
- **认证**: PyJWT + Passlib

### 数据库
- **PostgreSQL 15** - 主数据库（结构化数据）
  - 用户、论文、项目、专利等核心数据
  
- **MongoDB 6.0** - 文档数据库
  - 论文全文（支持全文搜索）
  - AI生成的报表
  - 操作审计日志
  
- **Neo4j** - 图数据库（知识图谱）
  - 实体节点存储
  - 关系图谱
  - 高性能图查询
  - Cypher查询语言
  
- **Redis** - 缓存（可选）
  - 验证码存储
  - 会话管理
  - 性能优化

---

## 四、数据流程

### 用户操作流程
```
1. 用户登录 → JWT Token认证
2. 操作数据 → 权限验证
3. 数据处理 → PostgreSQL保存
4. 日志记录 → MongoDB保存
5. 返回结果 → 前端展示
```

### 审计日志流程
```
用户操作 → API请求 → 权限验证 
        → 执行操作 → 记录日志（MongoDB）
        → 返回结果
```

### 搜索流程
```
关键词输入 → MongoDB全文搜索 
          → 结果排序 → 高亮显示
```

---

## 五、使用场景

### 科研机构
- 📚 论文成果管理和统计
- 💰 科研项目管理和预算控制
- 🏆 专利技术管理和转化
- 📊 科研数据分析和报表
- 🌐 知识图谱分析科研关系网络

### 高校
- 🎓 教师科研成果管理
- 📖 学生竞赛和项目管理
- 🤝 校企合作项目管理
- 📈 科研数据统计分析
- 👥 研究团队和合作网络可视化

### 企业
- 💡 技术专利管理
- 🔬 研发项目管理
- 📝 技术文档管理
- 🌐 对外合作管理
- 🔗 技术关联和知识传承分析

---

## 六、系统优势

### 1. 全面覆盖
- ✅ 9大科研成果类型
- ✅ 完整的生命周期管理
- ✅ 灵活的字段配置
- ✅ 丰富的数据关联

### 2. 智能高效
- ✅ MongoDB全文搜索
- ✅ AI智能分析报表
- ✅ 批量导入导出
- ✅ 自动统计分析

### 3. 安全可靠
- ✅ 三级权限控制
- ✅ JWT Token认证
- ✅ 操作日志审计
- ✅ 数据加密存储

### 4. 现代化UI
- ✅ 响应式设计
- ✅ 深色模式支持
- ✅ 美观的界面
- ✅ 流畅的交互

### 5. 易于扩展
- ✅ 模块化设计
- ✅ RESTful API
- ✅ 清晰的代码结构
- ✅ 完善的文档

---

## 七、快速上手

### 第一步：注册账号
1. 访问系统首页
2. 点击"注册"
3. 填写用户名、邮箱、密码
4. **第一个注册的用户自动成为超级管理员**

### 第二步：登录系统
- **方式1**: 用户名/邮箱 + 密码
- **方式2**: 邮箱验证码登录

### 第三步：开始使用
1. 选择功能模块（如论文管理）
2. 点击"添加"创建新记录
3. 填写表单信息
4. 保存数据

### 第四步：批量导入（管理员）
1. 进入任意模块
2. 点击"批量导入"
3. 下载CSV模板
4. 填写数据并上传
5. 查看导入结果

### 第五步：查看日志（超级管理员）
1. 点击右上角菜单
2. 选择"日志管理"
3. 查看所有操作记录
4. 使用筛选和搜索功能

---

## 八、系统截图

### 登录界面
- 支持用户名/邮箱登录
- 支持验证码登录
- 记住我功能

### 仪表盘
- 数据统计卡片
- 快捷操作入口
- 最近操作记录
- 待办提醒

### 数据管理
- 列表展示（分页）
- 搜索和筛选
- 批量操作
- 详情查看

### 表单编辑
- 清晰的表单布局
- 字段验证
- 实时保存
- 错误提示

### 日志管理
- 操作类型筛选
- 时间范围选择
- 详细信息查看
- 数据变更对比

---

## 九、常见问题

### Q1: 如何成为管理员？
A: 第一个注册的用户自动成为超级管理员，超级管理员可以在用户管理中提升其他用户为管理员。

### Q2: 忘记密码怎么办？
A: 可以使用"邮箱验证码登录"功能，或联系管理员重置密码。

### Q3: 批量导入失败怎么办？
A: 
1. 检查CSV文件编码是否为UTF-8
2. 检查字段名是否与模板一致
3. 检查必填字段是否填写
4. 查看错误提示信息

### Q4: 可以导出数据吗？
A: 可以，点击"导出"按钮即可导出Excel文件。

### Q5: 操作记录可以删除吗？
A: 操作日志不可删除，确保数据可追溯。但超级管理员可以清理90天以前的旧日志。

### Q6: 支持移动端吗？
A: 支持，界面采用响应式设计，可以在手机和平板上使用。

---

## 十、更新计划

### 即将推出
- ☐ 邮件通知功能
- ☐ 文件预览功能
- ☐ 高级搜索功能
- ☐ 数据可视化大屏
- ☐ 移动端APP

### 未来规划
- ☐ 工作流引擎
- ☐ 报表自定义
- ☐ API开放平台
- ☐ 数据导入导出优化

---

## 十一、技术支持

### 问题反馈
- 系统Bug: 在GitHub提交Issue
- 功能建议: 发送邮件至项目组
- 使用问题: 查看帮助文档

### 文档资源
- `README.md` - 完整系统介绍（英文）
- `系统介绍.md` - 本文档（中文）
- `AUDIT_LOG_USAGE.md` - 审计日志使用指南
- `BATCH_IMPORT_FIX.md` - 批量导入说明
- `LOGIN_REGISTER_LOGS_ADDED.md` - 登录日志说明

### 测试脚本
- `test_audit_logs.py` - 审计日志测试
- `test_mongodb_papers.py` - 论文全文搜索测试
- `test_ai_reports.py` - AI报表测试

---

## 十二、系统信息

### 版本信息
- **当前版本**: v1.0.0
- **发布日期**: 2024-11-16
- **更新日期**: 2024-11-16

### 技术栈版本
- Next.js: 14.x
- React: 18.x
- FastAPI: 0.104+
- Python: 3.11+
- PostgreSQL: 15
- MongoDB: 6.0

### 系统规模
- **前端**: ~500个组件和页面
- **后端**: ~100个API端点
- **数据库**: 20+张表 + 3个MongoDB集合
- **代码量**: 约50,000行

### 覆盖率
- **功能模块**: 9个 ✅
- **审计日志**: 100% ✅
- **认证安全**: 100% ✅
- **批量操作**: 100% ✅

---

## 🎉 感谢使用科研管理系统！

如有任何问题或建议，欢迎反馈！
